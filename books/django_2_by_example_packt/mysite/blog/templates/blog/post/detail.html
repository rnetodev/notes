{% extends "blog/base.html" %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
    <h1>{{ post.title }}</h1>
    <p class="date">
        Published {{ post.publish }} by {{ post.author }}
    </p>
    <p>
        {{ post.body|linebreaks }}
    </p>
    <p>
        <a href="{% url 'blog:post_share' post.id %}">Share!</a>
    </p>
    <p>
        {% if new_comment %}
            <div class="alert success">Comment saved!</div>
        {% else %}
        <form action="." method="POST">
            {% csrf_token %}
            {{ comment_form.as_p }}
            <input type="submit" value="Comment">
        </form>
        {% endif %}
    </p>
    {% with comments.count as total_comments %}
        {{ total_comments }} comment{{ total_comments|pluralize }}
    {% endwith %}
    <hr>
    {% for comment in comments %}
        <p>{{ comment }}</p>
        <p>{{ comment.body }}</p>
        <p>{{ comment.created }}</p>
        <hr>
    {% empty %}
        <p>Oh! No comments yet.</p>
    {% endfor %}
{% endblock %}